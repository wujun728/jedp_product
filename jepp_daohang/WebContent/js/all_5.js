(function(){var e=1,t=function(t){this.data=t||[],this.id=e++};t.prototype.setData=function(e){this.data=e||[]},t.prototype.getData=function(){return this.data.slice()},t.prototype.empty=function(){this.data=[]},window.Tape=t})(),function(){function e(e){return Math.round(e/100)}function t(e){return e?e*100:0}var n=function(){var n=200,r=400,i=function(){this.isStoped=!1,this.playTimer=null,this.playing=function(i){if(!i||!i.length){this.autoStop&&this.autoStop();return}var s=this,o=i.shift(),u=o.split(";"),a=u[0],f=t(i[0]&&i[0].split(";")[1]||e(r)),l=t(u[2]||e(n));soundWave.trigger(a,l),s.isStoped?(clearTimeout(s.playTimer),s.isStoped=!1):s.playTimer=setTimeout(function(){s.playing(i)},f)}};return i.prototype.start=function(e){this.isStoped=!1,this.playing(e)},i.prototype.stop=function(){this.isStoped=!0},i}(),r=function(){var t=function(){var t=this;this.data=[],this.startTime=null,this.triggerHander=function(n){var r=+(new Date);t.startTime||(t.startTime=r);var i=[n.noteId,e(r-t.startTime)];t.data.push(i.join(";")),t.startTime=r}};return t.prototype.start=function(){this.data=[],this.startTime=null,soundWave.on("trigger",this.triggerHander)},t.prototype.stop=function(){return soundWave.un("trigger",this.triggerHander),this.data},t}(),i={EMPTY:"empty",LOADED:"loaded",PLAYING:"playing",RECORDING:"recording",PAUSED:"paused"},s={LOAD:"load",PLAY:"play",RECORD:"record",STOP:"stop",PAUSE:"pause",EJECT:"eject"},o=function(){var e={};return{reg:function(t,n,r){e[t]||(e[t]={}),e[t][n]=r},next:function(t,n){var r=n;return e[t]&&e[t][n]&&(r=e[t][n]),r}}}();o.reg(s.LOAD,i.EMPTY,i.LOADED),o.reg(s.PLAY,i.LOADED,i.PLAYING),o.reg(s.PLAY,i.PAUSED,i.PLAYING),o.reg(s.RECORD,i.LOADED,i.RECORDING),o.reg(s.STOP,i.PLAYING,i.LOADED),o.reg(s.STOP,i.RECORDING,i.LOADED),o.reg(s.PAUSE,i.PLAYING,i.PAUSED),o.reg(s.EJECT,i.LOADED,i.EMPTY);var u=function(e){var t=this;this.currState=i.EMPTY,this.loadedTape=e||null,this.recorder=new r,this.player=new n,this.player.autoStop=function(){t.__fire(s.STOP)}};u.prototype.__fire=function(e){var t=this.currState,n=o.next(e,this.currState);if(t==i.LOADED&&n==i.PLAYING){var r=this.loadedTape&&this.loadedTape.getData()||[];this.player.start(r)}else if(t==i.LOADED&&n==i.RECORDING)this.recorder.start();else if(t==i.PLAYING&&n==i.LOADED)this.player.stop();else if(t==i.RECORDING&&n==i.LOADED){var r=this.recorder.stop();this.loadedTape&&this.loadedTape.setData(r)}this.currState=n},u.prototype.load=function(e){this.loadedTape=e||null,this.__fire(s.LOAD)},u.prototype.superPlay=function(){this.__fire(s.LOAD),this.__fire(s.STOP),this.__fire(s.PLAY)},u.prototype.play=function(){this.__fire(s.PLAY)},u.prototype.stop=function(){this.__fire(s.STOP)},u.prototype.superRecord=function(){this.__fire(s.LOAD),this.__fire(s.STOP),this.__fire(s.RECORD)},u.prototype.record=function(){this.__fire(s.RECORD)},u.prototype.eject=function(){this.__fire(s.EJECT);var e=this.loadedTape;return this.loadedTape=null,e},u.prototype.getTape=function(){return this.loadedTape},u.prototype.getState=function(){return this.currState},window.TapeDeck=u}();(function(){var e=0,t=6,n=330,r=!!document.createElement("audio").canPlayType&&""!=document.createElement("audio").canPlayType('audio/mpeg; codecs="mp3"'),i=!!document.createElement("audio").canPlayType&&""!=document.createElement("audio").canPlayType('audio/ogg; codecs="opus"'),s=function(e,t,n){return"http://s8.qhimg.com/share/audio/piano1/"+t.toLowerCase()+(+e+1)+"."+n},o=function(e){e=e||{},this.baseRange=4};o.KEYS={DO:"C",RE:"D",MI:"E",FA:"F",SO:"G",LA:"A",XI:"B"},o.isCanUse=function(){var e=r||i;return o.isCanUse=function(){return e},e},o.superTone=function(){var e={},t=function(e,t,n){return"http://s8.qhimg.com/share/audio/piano1/"+t.toLowerCase()+(+e+1)+"."+n},n=function(e,t){var n=new Audio;return n.autoplay=!1,n.loop=!1,n.preload="auto",n.autobuffer=!0,n.setAttribute("data-loadeddata","false"),n.addEventListener("loadeddata",function(){n.setAttribute("data-loadeddata","true")}),i?n.src=s(e,t,"ogg"):r&&(n.src=s(e,t,"mp3")),n},o=function(t,n,r){var i=t+n;e[i]||(e[i]=[]),r&&e[i].push(r)},u=function(t,r){var i=t+r;return!e[i]||e[i].length<=0?(e[i]=[],o(t,r,n(t,r))):e[i].length>5&&e[i].splice(4,e[i].length-5),e[i]},a=function(e){setTimeout(function(){try{e.currentTime=0,e.play()}catch(t){}})};return{load:function(e,t){var n=u(e,t);n[0].load()},play:function(e,t){var n=u(e,t),r=n.shift();r.addEventListener("ended",function(){r.setAttribute("data-loadeddata","true"),r.removeEventListener("ended",arguments.callee),o(e,t,r)});if(r.getAttribute("data-loadeddata")=="false"){r.load();var i=!1;r.addEventListener("loadeddata",function(){i||a(r),r.removeEventListener("loadeddata",arguments.callee)}),setTimeout(function(){i=!0,r.setAttribute("data-loadeddata","true")},1e3)}else a(r)},getDepot:function(){return e}}}(),o.prototype.preload=function(e,t){o.superTone.load(t,e)};var u={1:o.KEYS.DO,2:o.KEYS.RE,3:o.KEYS.MI,4:o.KEYS.FA,5:o.KEYS.SO,6:o.KEYS.LA,7:o.KEYS.XI},a=[o.KEYS.DO,o.KEYS.RE,o.KEYS.MI,o.KEYS.FA,o.KEYS.SO,o.KEYS.LA,o.KEYS.XI],f=function(e,t){return e+"-"+t},l=function(e){return!isNaN(+e)&&u[e]?!0:!1},c=function(e){return!isNaN(+e)&&+e>-2&&+e<8},h=function(e){return a.indexOf(e)>-1};o.prototype.setRange=function(e){return e&&c(e)?(this.baseRange=e,!0):!1},o.prototype.tap=function(e,t){l(e)&&(e=u[e]);if(!t||!c(t))t=this.baseRange;if(!h(e))return;o.superTone.play(t,e)};var p=function(n){return this.preloaded=!1,this.pronouncedNotes={},this.pronouncedCount=0,this.baseRangeIndex=3,this.muteIsOn=!1,this.preloadThreshold=100,typeof n!="undefined"&&parseInt(n)>=e&&parseInt(n)<=t&&(this.baseRangeIndex=parseInt(n)),this.instrument=new o,this.setPreloadThreshold(3),this};p.keyNumConf={1:[o.KEYS.DO,0],2:[o.KEYS.RE,0],3:[o.KEYS.MI,0],4:[o.KEYS.FA,0],5:[o.KEYS.SO,0],6:[o.KEYS.LA,0],7:[o.KEYS.XI,0],8:[o.KEYS.DO,1],9:[o.KEYS.RE,1]},p.prototype.isCanUse=p.isCanUse=o.isCanUse,p.prototype.preload=function(){if(this.preloaded||this.muteIsOn)return;for(var e in p.keyNumConf){var t=p.keyNumConf[e];this.instrument.preload(t[0],this.baseRangeIndex+t[1])}this.preloaded=!0},p.prototype.pronounce=function(e){if(typeof e=="undefined"||this.muteIsOn)return;var t=p.keyNumConf[e];if(!t)return;this.instrument.tap(t[0],this.baseRangeIndex+t[1]),this.pronouncedNotes[e]||(this.pronouncedNotes[e]=1,this.pronouncedCount++,this.preloadThreshold<=this.pronouncedCount&&this.preload())},p.prototype.setPreloadThreshold=function(e){typeof e!="undefined"&&parseInt(e)>-1&&(this.preloadThreshold=parseInt(e),this.preloadThreshold==0&&this.preload())},p.prototype.onMute=function(){this.muteIsOn=!0},p.prototype.offMute=function(){this.muteIsOn=!1},window.Musical=p,window.Piano=o})();(function(){var e=QW.EventTargetH,t=QW.CustEvent,n=e.delegate,r=e.undelegate,i=e.on,s=QW.Selector.filter,o=QW.ObjectH.keys,u=function(e){return e=e||document,{on:function(t,r,i){i=i||{};var s=o(r);s.forEach(function(r){var s=this;n(e,r,t,function(e){i.preventDefault&&e.preventDefault(),s[r].call(this,e)})},r)},off:function(t,n,i){var s=o(n);s.forEach(function(n){var s=this;i?r(e,n,t,i):r(e,n,t)},n)}}};QW.provide("uiproxy",u)})();(function(){function u(){function r(e){return function(){var n,r;t=this.slice().reverse();while(r=t.pop())n=r[e].apply(r,arguments);return t=!1,n}}var e=[],t=!1;return n(e,{call:r("call"),apply:r("apply"),clear:function(e){if(!e)this.length=0;else{var n=this.length,r=n-t.length;for(var i=this.length-1;i>=0;i--)this[i]===e&&(this.splice(i,1),t&&i>=r&&t.splice(n-i-1,1));if(i<0)return!1}return!0}}),e}var e=QW.EventTargetH,t=e.on,n=QW.ObjectH.mix,r=QW.ObjectH.isFunction,i=QW.Selector.filter,s=QW.ObjectH.keys,o=QW.ArrayH.forEach,a=function(){function r(e){var t=this;e=e||{},this.target=e.target||document,this.keyHandlers={},this.globalKeyHandlers={},this.rules=[],this.sequence={},this.sequenceNums=[],this.history=[],this.trace=e.trace,this.traceStack=e.traceStack||[],this.forTextarea=e.forTextarea||!1,this._handler=function(e){if(t.forTextarea&&!/textarea|input/i.test(e.target.nodeName)&&e.target.type!=="text")return;if(!t.forTextarea&&this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||e.target.type==="text"))return;var n,r=t.lock||!t.check(this,e),s=t.keyHandlers[e.type],o=t.globalKeyHandlers[e.type];if(s){var u=i(e),a,f;for(var l in u){a=s[l];if(a)break}if(t.sequenceNums.length&&!r){var c=t.history;c.push(l),c.length>10&&c.shift();if(c.length>1)for(var h=t.sequenceNums.length-1;h>=0;h--){f=s[c.slice(0-t.sequenceNums[h]).join("->")];if(f)return t.trace&&t._trace(h),n=f.apply(this,arguments),c.length=0,n||e.preventDefault(),n}}if(a){if(r)return!1;t.trace&&t._trace(l),n=a.apply(this,arguments),n||e.preventDefault()}}if(o){if(r)return!1;n=o.apply(this,arguments),n||e.preventDefault()}return n}}function i(e){var r=e.type!=="keypress"&&t[e.which],i=String.fromCharCode(e.which).toLowerCase(),s="",o={};e.altKey&&r!=="alt"&&(s+="alt+"),e.ctrlKey&&r!=="ctrl"&&(s+="ctrl+"),e.metaKey&&!e.ctrlKey&&r!=="meta"&&(s+="meta+"),e.shiftKey&&r!=="shift"&&(s+="shift+");if(r)o[s+r]=!0;else{var u=s+i;u&&(o[u]=!0),u=n[i],u&&(o[s+u]=!0,s==="shift+"&&(u=n[i],u&&(o[u]=!0)))}return o}function s(e){return new r(e)}var t={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};return r.prototype={addHandler:function(t,n,r){function o(e){if(e){var n=e.split("->");if(n.length>1){i.sequence[n.length]=1;var o=[];for(var a in i.sequence)o.push(parseInt(a,10));i.sequenceNums=o.sort(function(e,t){return e-t})}var f=e.toLowerCase();s[f]||(s[f]=u()),s[f].push(r)}else{var l=i.globalKeyHandlers[t];l||(l=i.globalKeyHandlers[t]=u()),l.push(r)}}var i=this,s=this.keyHandlers[t];return r||(r=n,n=""),s||(s=this.keyHandlers[t]={},e.on(this.target,t,this._handler)),ObjectH.isArray(n)?n.forEach(function(e){o(e)}):o(n),this},_trace:function(e){this.traceStack.unshift("["+e+"]"),this.traceStack.length>this.trace&&this.traceStack.pop()},reset:function(){for(var t in this.keyHandlers)e.un(t,this._handler);this.keyHandlers={},this.rules=[],this.history=[],delete this._handler,this.lock=!1},addRule:function(e){return this.rules.push(e),this},enable:function(){this.lock=!1},disable:function(){this.lock=!0},check:function(e,t){var n=!0,r=this.rules;for(var i=0,s=r.length;i<s;i++)if(!r[i].call(e,t)){n=!1;break}return n}},["down","up","press"].forEach(function(e){this[e]=function(t,n){return this.addHandler("key"+e,t,n),this}},r.prototype),s.KEYS_CODE=t,s}();QW.provide("Konami",a)})();(function(){function e(e,t){this._doms=e.toArray(),this._render(t),this.triggers=t.triggers||[{window:"resize"},{window:"scroll"}],this._init()}e.prototype.getCurrent=function(){return this.current},e.prototype._init=function(){if(this.triggers){var e={window:window,document:document},t=this;this.triggers.forEach(function(n){for(var r in n){var i=n[r];e[r]&&(r=e[r]),W(r).on(i,function(){t.dealWithDisplay()})}})}},e.prototype._loadTextareaChildDom=function(e){var t=W(this._doms[e]).query("TEXTAREA");t.length&&(W(this._doms[e]).html(W(t[0]).val()),this._doms.splice(e,1))},e.prototype._loadImage=function(e){var t=this._doms[e],n=W(t).attr(this.imageRealPath);n&&(W(this._doms[e]).attr("src",n),this._doms.splice(e,1))},e.prototype._loadDoms=function(e){this.current=W(this._doms[e]);if(this.onbeforeload&&this.onbeforeload()===!1)return!1;switch(this.lazyloaderType){case"blocker":this._loadTextareaChildDom(e);break;case"imager":this._loadImage(e)}if(this.onafterload&&this.onafterload()===!1)return!1},e.prototype.dealWithDisplay=function(){var e=DomU.getDocRect(),t={left:e.scrollX,right:e.width+e.scrollX+this.threshold,top:e.scrollY,bottom:e.height+e.scrollY+this.threshold};for(var n=0;n<this._doms.length;++n){var r=NodeH.getRect(this._doms[n]);DomU.rectIntersect(r,t)&&this._loadDoms(n)}},e.prototype._render=function(e){this.lazyloaderType=e.lazyloaderType||"blocker",this.imageRealPath=e.imageRealPath||"data-src",this.threshold=e.threshold||0,this.onbeforeload=e.onbeforeload,this.onafterload=e.onafterload},window.lazyLoader=e})();var MessagePushServer=function(){function s(){var e=qboot.cookie.get(r)||0;qboot.jsonp(HAO_CONFIG.pushServer.host.format(e,"MessagePushServer.callback"))}var e={},t=QW.TweetH,n=qboot.mix,r="msgMaxId",i=9e5;return e.callback=function(e){var n=e.ti*1e3;t.tweet(document,"message-push",e),setTimeout(function(){s()},n)},e.run=function(e){!e||(i=e),setTimeout(function(){s()},i)},e}(),MESSAGE_PUSH_RATE=parseFloat(hao360.g("message-push-rate").value);Math.random()>MESSAGE_PUSH_RATE&&MessagePushServer.run();M("#topbar",function(e,t){var n=function(t){var t=t||"on";t=="off"?(e("#toolbar-edition").removeClass("on"),e(".more-edition").hide()):(e("#toolbar-edition").addClass("on"),e(".more-edition").show())};e("#toolbar-edition").click(function(e){e.preventDefault(),n()}).on("mouseenter",function(t){e("#toolbar-edition").addClass("on")}).on("mouseleave",function(e){n("off")}),e(".more-edition>div").hover(function(t){e(this).toggleClass("hover")}).click(function(n){n.preventDefault(),t.tweet("index-change",{index:e(this).attr("data-v")})});var r={my:"index.html",kuanping:"index.html"};QW.TweetH.receive(document,"index-change",function(e){var t=r[e.data.index];typeof t=="string"?(qboot.cookie.set("360WEBINDEXCK",t,{expires:31536e6}),setTimeout(function(){window.location.href=t},200)):typeof t=="function"&&t()}),e("#toolbar-themetrigger").on("mouseover",function(){var e=QW.W("#theme-panel").css("display")=="none";t.tweet("global:themeTrigger",{action:"over",status:e?"open":"close"})}),e("#toolbar-themetrigger").click(function(e){e.preventDefault();var n=QW.W("#theme-panel").css("display")=="none";t.tweet("global:themeTrigger",{action:"click",status:n?"open":"close"})})});qboot.load(function(){document.getElementById("suggest-container")||QW.W("body").insertAdjacentHTML("beforeend",'<div id="suggest-container" style="visibility: hidden;"><div class="suggest-bd"></div><div class="suggest-ft"><div class="declare">\u7531360\u641c\u7d22\u63d0\u4f9b</div></div></div>')},function(){var e=W("#search-kw")[0],t=W("#search-input")[0],n=W("#suggest-container")[0],r=W("#suggest-container .suggest-bd")[0],i=e.form,s=new qSuggest(e,{uiReferElem:t,uiWrapElem:n,uiContainerElem:r,posAdjust:{width:-2,top:-1},recAllTimeout:120}),o=function(){var t=navigator.userAgent.toLowerCase(),n=/webkit/.test(t)&&!/qqbrowser/.test(t);return n&&W("body").appendChild("<a id='cbdopen' href='' rel='noreferrer' style='position:absolute;top:-100px;left:-100px;'>cbdopen</a>"),function(){var t=search.get()||[],r=t[0],i=t[1];if(i==="baidu"){var s=HAO_DATA.searchTabData.searchEngConf[r].baidu,o=s[0]+"?"+s[1]+"="+encodeURIComponent(e.value)+"&"+s[4].replace(/:/g,"=").split(";").join("&"),u=!1;try{if(n){var a=document.getElementById("cbdopen");a.href=o;if(document.createEvent){var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!1),a.dispatchEvent(f)}else a.click();u=!0}else{var l=window.open(o);l&&l.opener&&(u=!0)}}catch(c){u=!1}return!!u}return!1}}();(function(){var e=qSuggest.log,t=s,n=t.ui,r=t.data,i="reci",u="direct",a="common",f={},l={},c=function(e){return String(e).replace(/[^\x00-\xff]/g,"abc").replace(/[\d]/g,"abc").length},h="",p=!1;f[a]=[1,50],f[u]=[6,50],l[a]=[],l[u]=[],l[i]=[],n.searchForm.on("submit",function(e){var r=n.getFocusedGroup();if(r==u){var s=W("#suggest-direct>a.hover");s[0]&&p?(window.open(s.attr("href")),e.preventDefault&&e.preventDefault(),p=!1):o()&&e.preventDefault&&e.preventDefault()}else{var s=W("#suggest-reci>a.hover");r==i&&s[0]&&s.attr("href")&&p?(window.open(s.attr("href")),e.preventDefault&&e.preventDefault(),p=!1):o()&&e.preventDefault&&e.preventDefault()}n.getTextInputVal()==t.query&&LogHub.suggest("nosuggestClk",{inputKw:n.getTextInputVal()}),h=n.getTextInputVal(),LogHub.search("query",{query:n.getTextInputVal()})}),function(){var e={},r={};Feed.hotword(function(e){r=e;if(hao360.channel=="")return;for(var t in r)if(t=="webpage"||t=="news"){var n=r[t];for(var i=0,s=n.length;i<s;i++)n[i][1]=n[i][1].replace("src=hao_hot","src=hao_hot_"+hao360.channel);r[t]=n}});var s=W("#search-hotword-tips");W("#suggest-container").delegate("#reci-auto-show","click",function(){W(this).attr("checked")?(qboot.cookie.set("reciDenyAutoShow",1,{expires:31536e6}),s.fadeIn(1e3,function(){setTimeout(function(){s.fadeOut()},3500)})):(s.fadeOut(1e3),qboot.cookie.remove("reciDenyAutoShow"))}),W("#search-hotword").on("click",function(e){var r=W(this);r.hasClass("open")?(n.hide(),r.removeClass("open")):(W("#suggest-reci")[0]?n.show():(t.query="",n.render()),r.addClass("open")),n.focusTextInput(),n.on("change",function(e){n.hide(),n.un("change",arguments.callee)})}),n.on("show",function(){n.getTextInputVal().trim()==""&&(W("#search-hotword").addClass("open"),LogHub.reci("show",{cate:search.getCate()}))}),n.on("hide",function(){W("#search-hotword").removeClass("open")}),W(document).receive("search-cate-change",function(e){t.query==""&&W("#suggest-reci")[0]&&(n.fillContent(),n.query=n.getTextInputVal())}),n.on("change",function(e){e.query||n.hide()}),n.textInput.on("mousedown",function(e){n.getTextInputVal().trim()==""&&(n.isVisible()||!qboot.cookie.get("reciDenyAutoShow"))&&W("#search-hotword").fire("click")}),n.textInput.on("keydown",function(e){var t=n.container.html()?!0:!1;!t&&e.keyCode==40&&n.getTextInputVal().trim()==""&&W("#search-hotword").fire("click")}),n.bindGroupHandler(i,{render:{setup:function(){l[i]=[]},build:function(){if(t.query==""){var s=search.getCate();if(r[s]){if(!e[s]){e[s]={};var o="",u=e[s].total=r[s].length,a="",f=[];for(var l=0;l<u;l++)a=l<3?"<em class='hot'>"+(l+1)+"</em>":"<em>"+(l+1)+"</em>",f=[],+r[s][l][2]&&f.push("new"),o+="<a"+(r[s][l][1]?' href="'+r[s][l][1]+'"':"")+' data-text="'+r[s][l][0]+'" data-index="'+l+'">'+a+'<span class="'+f.join(" ")+'">'+r[s][l][0]+"</span></a>";e[s].content=o?'<div id="suggest-reci">'+o+'<div class="reci-setting"><label for="reci-auto-show"><input id="reci-auto-show" type="checkbox" checkedtmpl/>\u4e0d\u518d\u81ea\u52a8\u663e\u793a</label></div></div>':""}return n.setGroupTotal(i,e[s].total),e[s].content.replace("checkedtmpl",qboot.cookie.get("reciDenyAutoShow")?"checked":"")}return""}W("#search-hotword").removeClass("open")},teardown:function(){l[i]=W("#suggest-reci>a")}},init:function(){n.initGroupMouseBehavior(i,"#suggest-reci>a"),n.container.delegate("#suggest-reci>a","click",function(e){W(this).attr("href")||e.preventDefault()}),n.on("itemSelect",function(e){if(e.group!==i)return;if(e.index>-1&&l[i][e.index]){var t=l[i].item(e.index),r=t.attr("data-text");e.trigger!="keyboard"&&n.setTextInputVal(r),t.attr("href")?e.trigger=="keyboard"&&n.getTextInputVal()==r&&(p=!0):n.fire("enter",{trigger:e.trigger}),LogHub.reci("click",{cate:search.getCate(),text:t.attr("data-text"),link:t.attr("href")})}}),n.on("itemFocus",function(e){if(e.group!==i)return;if(e.index>-1&&l[i][e.index]){var t=l[i].item(e.index);t.addClass("hover"),e.trigger==="keyboard"&&n.setTextInputVal(t.attr("data-text"))}}),n.on("itemBlur",function(e){if(e.group!==i)return;e.index>-1&&l[i][e.index]&&l[i].item(e.index).removeClass("hover")})}})}(),r.bindGroupHandler(a,{request:function(e,t){if(!t||!e)return;if(e.indexOf("?")>-1)return;var n=c(e);n>=f[a][0]&&n<=f[a][1]&&qboot.jsonp("http://sug.so.360.cn/suggest?word="+encodeURIComponent(e)+"&encodein=utf-8&caller=hao_home&encodeout=utf-8&pq="+encodeURIComponent(h),function(e,n){t(e)},{jsonp:"callback"})},receive:function(t){if(t&&t.q&&t.s&&t.s.length>0){var n=c(t.q);if(n>f[a][0]&&n<f[u][0]){var i=t.s[0];r.on("receiveOne",function(n){n.name===u&&(e("query ["+t.q+"] twice by ["+n.query+"]",n.data),r.setOne(n.name,t.q,n.data),r.un("receiveOne"))}),r.getOne(u,i)}return{query:t.q,data:t.s}}return null}}),r.bindGroupHandler(u,{request:function(e,t){if(!t||!e)return;if(e.indexOf("?")>-1)return;var n=c(e);n>=f[u][0]&&n<=f[u][1]&&qboot.jsonp("http://sug.h.qhimg.com/sug.php?ver=2.1&kw="+encodeURIComponent(e)+"&from=hao360cn",function(e,n){t(e)},{jsonp:"cb"})},receive:function(e){return e&&e.errno===0?{query:e.kw,data:e}:null}}),n.bindGroupHandler(u,{render:{setup:function(){l[u]=[]},build:function(e){if(!e)return"";if(e.res.length<=0)return"";var r="",i=e.app,s=e.res[0];i==="video"&&(r='<a class="video" data-subApp="'+i+'" data-text="'+s[0]+'" data-index="0" href="'+s[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><strong>'+s[0]+"</strong> "+s[1]+'<ins class="hdicon"></ins></h2><div class="meta">'+s[3]+'</div><div class="meta">'+s[4]+"</div></a>"),i==="website"&&(r='<a class="website" data-subApp="'+i+'" data-text="'+s[0]+'" data-index="0" href="'+s[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><img src="'+s[4]+'" /><strong>'+s[0]+"</strong> - "+s[3]+'</h2><div class="meta">'+s[1]+"</div></a>");if(i==="caipiao"||i==="mall"||i==="tuan"||i==="game")r='<a class="'+i+'" data-subApp="'+i+'" data-text="'+s[0]+'" data-index="0" href="'+s[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><strong>'+s[0]+"</strong> - "+s[1]+'</h2><div class="meta">'+s[3]+"</div></a>";r=r?'<div id="suggest-direct">'+r+"</div>":"";var o=search.getEng()[1];return o!=="somulti"&&o!=="so360"&&(r=""),r&&(n.setGroupTotal(u,1),LogHub.suggest("directShow",{inputKw:t.query,directKw:s[0],subApp:i})),r},teardown:function(){l[u]=W("#suggest-direct>a")}},init:function(){n.initGroupMouseBehavior(u,"#suggest-direct>a"),n.on("itemSelect",function(r){if(r.group===u){e("itemSelect[DIRECT] index:"+r.index);if(r.index>-1&&l[u][r.index]){var i=l[u].item(r.index),s=i.attr("data-text");r.trigger=="keyboard"&&n.getTextInputVal()==s?p=!0:r.trigger!="keyboard"&&n.setTextInputVal(s),LogHub.suggest("directClk",{inputKw:t.query,directKw:s,subApp:i.attr("data-subApp")})}}}),n.on("itemFocus",function(e){if(e.group!==u)return;if(e.index>-1&&l[u][e.index]){var t=l[u].item(e.index);t.addClass("hover"),e.trigger==="keyboard"&&n.setTextInputVal(t.attr("data-text"))}}),n.on("itemBlur",function(e){if(e.group!==u)return;e.index>-1&&l[u][e.index]&&l[u].item(e.index).removeClass("hover")})}}),n.bindGroupHandler(a,{render:{setup:function(){l[a]=[]},build:function(){var e=0;return function(r){if(!r)return"";var i="",s,o=t.query.length;n.setGroupTotal(a,r.length);for(var u=0,f=r.length;u<f;u++){r[u]=r[u].trim(),s=r[u].toLowerCase();if(s===t.query)continue;s.indexOf(t.query)===0&&(s=t.query+"<b>"+s.substring(o)+"</b>"),i+='<a data-text="'+r[u]+'" data-index="'+u+'">'+s+"</a>"}return i=i?'<div id="suggest-common">'+i+"</div>":"",e!=f&&(e=f,W(".suggest-ft .declare").css("position","relative").css("position","absolute")),i}}(),teardown:function(){l[a]=W("#suggest-common>a")}},init:function(){n.initGroupMouseBehavior(a,"#suggest-common>a"),n.container.delegate("#suggest-common>a","click",function(e){e.preventDefault()}),n.on("itemSelect",function(r){if(r.group!==a)return;if(r.index>-1&&l[a][r.index]){var i=l[a].item(r.index);r.trigger!="keyboard"&&n.setTextInputVal(i.attr("data-text")),n.fire("enter",{trigger:r.trigger}),e("itemSelect[COMMON] index:"+r.index),LogHub.suggest("commonClk",{inputKw:t.renderQuery,suggestKw:i.attr("data-text"),index:r.index,eng:search.get()[1]}),t.renderQuery!=t.query&&LogHub.behavior("suggest","queryIsDifferent")}}),n.on("itemFocus",function(e){if(e.group!==a)return;if(e.index>-1&&l[a][e.index]){var t=l[a].item(e.index);t.addClass("hover"),e.trigger==="keyboard"&&n.setTextInputVal(t.attr("data-text"))}}),n.on("itemBlur",function(e){if(e.group!==a)return;e.index>-1&&l[a][e.index]&&l[a].item(e.index).removeClass("hover")})}}),n.on("itemSelect",function(e){n.hide()}),n.on("change",function(e){W("#search-kw").tweet("query-change",{query:e.query})}),W(document).on("mouseup",function(e){var t=W(e.target);(!t.attr("id")||["search-kw","search-hotword","suggest-container"].indexOf(t.attr("id"))==-1)&&!t.parentNode("#search-kw")[0]&&!t.parentNode("#suggest-container")[0]&&!t.parentNode("#search-hotword")[0]&&n.hide()}),W(window).on("blur",function(){n.hide()})})()});(function(){var e=qboot.when,t=HAO_CONFIG.themeConfig.cdn_host,n=HAO_CONFIG.themeConfig.host,r=THEME_CONF.TAGKEYS,i=HAO_CONFIG.themeConfig.v,s=HAO_CONFIG.themeConfig.threshold,o=5e3,u=THEME_CONF.DSTVER,a={total:{},data:{}},f={},l={},c=t,h=10,p=1,d=3,v={},m=function(){var e=function(e){return Math.floor(e/h)};return{wrapEntity:function(e){if(!e.keyword)return null;var t=e.ext||{bgcolor:"",bgpic:""},n={key:e.keyword||e.key,cover:e.cover||"",name:e.name||"",author:[e.author,e.author_blog]||["",""],weight:e.hot_weight||0,extjs:!!e.have_js||0,bgcolor:t.bgcolor||"",bgpic:t.bgpic||"",snapshot:e.snapshot.substr(0,8)||""};return n},getSections:function(t,n){return[e(t),e(n)]}}}();(function(){var e,t=r.slice();while(t.length>0)e=t.shift(),v[e]=1,a.total[e]=0,a.data[e]=[],l[e]={};THEME_CONF.DEFAULT.name="\u9ed8\u8ba4",f["default"]=m.wrapEntity(THEME_CONF.DEFAULT)})();var g=function(){var t={},n={};return function(r,l,h){var p=e.defer();if(h>0){var d=function(e,t){if(t.status!="ok")E(r,l,h).then(function(){p.resolve()}).otherwise(function(){p.reject()});else if(e&&e.errno==0){var n={total:e.data.theme_total||0,data:[]},i=e.data.theme_data.length,s;if(i>0){for(var o=0,i=e.data.theme_data.length;o<i;o++)s=m.wrapEntity(e.data.theme_data[o]),f[s.key]=s,n.data.push(m.wrapEntity(e.data.theme_data[o]));a.total[r]=n.total;var u=n.data.length,c=l+u,d=a.data[r].length;if(l<n.total){if(c>d)for(var o=d;o<c;o++)a.data[r][o]=null;Array.prototype.splice.apply(a.data[r],[l,u].concat(n.data))}}p.resolve()}else p.reject()},v={c:"theme",a:"index",tag:r,bgn:l,cnt:h,ver:i,fmt:"jsonp",dst_ver:u};DEBUG&&(v.debug=1);var g=c+"index.php?"+qboot.encodeURIJson(v);n[g]||(n[g]=[]),n[g].push(d),t[g]||(qboot.jsonp(g,function(e,r){t[g]=!1;var i=n[g].slice();n[g]=[];while(i.length>0){var s=i.shift();s&&s(e,r)}},{jsonp:"_callback",threshold:s,timeout:o,cb:"sectionTheme"+r+l+h}),t[g]=!0)}else p.resolve();return p.promise}}(),y=function(t){var n=e.defer();if(t){var r={c:"theme",a:"get",key:t,ver:i,fmt:"jsonp",dst_ver:u};DEBUG&&(r.debug=1),qboot.jsonp(c+"index.php?"+qboot.encodeURIJson(r),function(e,r){if(r.status!="ok")n.reject();else if(e&&e.errno==0){var i=m.wrapEntity(e.data);f[t]=i,n.resolve()}else n.reject()},{jsonp:"_callback",threshold:s,timeout:o,cb:"oneTheme"})}else n.reject();return n.promise},b=function(t,n){var r=e.defer();return l[t][n]?r.resolve():g(t,n*h,h).then(function(){l[t][n]=1,r.resolve()}).otherwise(function(){r.reject()}),r.promise},w=function(t,n){var r=e.defer();return a.total[t]==0?g(t,0,h).then(function(){r.resolve()}).otherwise(function(){r.reject()}):r.resolve(),r.promise},E=function(r,i,s){var o=e.defer();return p>d?(c=t,o.reject()):(p++,c=c==t?n:t,LogHub&&LogHub.behavior("theme2013","fetchSectionDataRetry"),g(r,i,s).then(function(){p=1,o.resolve()}).otherwise(function(){o.reject()})),o.promise},S=function(){};S.getDemoTheme=function(){return m.wrapEntity(__demoData)},S.getListTotal=function(e,t){(!e||!v[e])&&t(0),t=t||function(){},w(e).then(function(){t(a.total[e]),p=1}).otherwise(function(){t(0),p=1})},S.getListData=function(e,t,n,r){(!e||!v[e])&&r([]),r=r||function(){};var i=t+n-1,s=m.getSections(t,i),o=b(e,s[0]);if(s[1]>s[0])for(var u=s[0]+1;u<=s[1];u++)(function(t){o=o.then(function(){return b(e,t)})})(u);o.then(function(){r(a.data[e].slice(t,i+1)),p=1}).otherwise(function(){r([]),p=1})},S.getOneData=function(e,t){t=t||function(){},f[e]?t(f[e]):y(e).then(function(){t(f[e])}).otherwise(function(){t(f["default"])})},window.ThemeSvc=S,window.THEME_MAP=f})();(function(){function e(){this.totalPage=0,this.linkPoll={}}function t(){return new e}e.prototype={themeData:function(e){var t=this,n=this.category(),r=this.page(),i=this.count();ThemeSvc.getListData(n,r*i,i,function(r){ThemeSvc.getListTotal(n,function(n){t.totalPage=n=Math.ceil(n/i),e&&e({themeData:r,themePageCount:n})})})},themeKey2Data:function(e,t){ThemeSvc.getOneData(e,function(e){t&&t(e)})},category:function(e){return e===undefined?this._category?this._category:"zuire":(this._category=e,this._category)},page:function(e){return e===undefined?this._page:(this._page=e,this._page)},count:function(e){return e===undefined?this._count:(this._count=e,this._count)},setLinkPoll:function(e){this.linkPoll[e]=!0},isPreloadLink:function(e){return this.linkPoll[e]}},t.ThemeCollection=e,window.themeCollection=t})();(function(e){var t=['<li data-tkey="{$themekey}" class="{$className}" title="{$name}">','<div class="theme-cover">','<img src="{$cover}" />','<div class="theme-author">','<em class="txt">{$authorname}</em>','<span class="txt-bg"></span>',"</div>",'<div class="theme-shine" onselectstart="return false"></div>',"</div>",'<div class="theme-name">{$name}</div>','<div class="theme-total">{$weight}\u4e07\u4eba\u4f7f\u7528</div>','<div class="theme-selected"></div>',"</li>"];t=t.join("");var n="{$host}index.php?c=theme&a=css&key={$themekey}&ver={$v}&s={$snapshot}&dst_ver={$dstVer}{$debug}",r=W("#defaultThemeInlineCss").html(),i=function(e){var t=document.getElementById("userThemeOutlineCss");t?t.href=e:(t=document.createElement("link"),t.rel="stylesheet",t.id="userThemeOutlineCss",t.href=e,(document.head||document.getElementsByTagName("head")[0]).appendChild(t))},s={".theme-list li":function(){var e=this.getAttribute("data-tkey");l.canvas.query("li").removeClass("on"),W(this).addClass("on"),l.action.fire("theme:change",{themeKey:e})},".theme-category li":function(e){e.preventDefault(),W(".theme-category li").removeClass("selected"),W(this).addClass("selected");var t=this.getAttribute("data-category");l.action.fire("theme:category",{category:t})},".theme-list .slide-pageup":function(e){e.preventDefault(),l.action.fire("theme:prevpage")},".theme-list .slide-pagedown":function(e){e.preventDefault(),l.action.fire("theme:nextpage")},"#theme-panel .btn-finish":function(e){e.preventDefault(),W(l.broadcast).tweet("global:themeTrigger",{action:"click",status:"close"})},"#theme-panel .btn-restore":function(e){e.preventDefault(),l.setRestoreButtonStatus(THEME_CONF.DEFAULT.key),l.action.fire("theme:restore")}},o={".theme-list li":function(){var e=this.getAttribute("data-tkey");l.action.fire("theme:preloadlink",{themeKey:e}),W(this).query(".theme-author").show(),W(this).query(".theme-cover").addClass("hover")},".theme-list .slide-pagedown":function(e){l.action.fire("theme:preloadnext")},".theme-category li":function(e){var t=this.getAttribute("data-category");l.action.fire("theme:preloadcategory",{category:t})}},u={".theme-list li":function(){W(this).query(".theme-author").hide(),W(this).query(".theme-cover").removeClass("hover")}},a={".theme-list li":function(){!Browser.ie6&&themeView.makeShineAnimation(this)}},f={body:function(e){switch(e.keyCode){case 37:l.action.fire("theme:prevpage");break;case 39:l.action.fire("theme:nextpage");break;case 27:W(l.broadcast).tweet("global:themeTrigger",{action:"click",status:"close"})}}},l={broadcast:{},init:function(e){this.canvas=W(".theme-list").query(".gclearfix"),this.themeContainer=W("#theme-panel"),this.categoryBar=W(".theme-category"),this.nextSlidePager=W(".theme-list .slide-pagedown"),this.prevSlidePager=W(".theme-list .slide-pageup"),this.restoreButton=W(".btn-restore")},setExtCss:function(){hao360.themeData[0]!==THEME_CONF.DEFAULT.key&&this.setImageOuterState("addClass")},drawTheme:function(e){var n=[],r=e&&e(),i=r.selectedThemeKey;r.themeData.forEach(function(e,r){n.push(t.tmpl({cover:e.cover,name:e.name,themekey:e.key,weight:e.weight,authorname:e.author[0]||"",className:e.key==i?"on":""}))},this);var s={totalPage:r.totalPage,currentPage:r.currentPage};this.setRestoreButtonStatus(i),this.canvas.html(n.join("")),this.themeEntry=this.canvas.query("li"),this.setSlidePagerStatus(s)},setSlidePagerStatus:function(e){var t=e.totalPage,n=e.currentPage;n===1?this.prevSlidePager.attr("title","\u5df2\u7ecf\u662f\u7b2c\u4e00\u9875\u4e86").addClass("slide-pageup-end"):this.prevSlidePager.attr("title","\u4e0a\u4e00\u9875").removeClass("slide-pageup-end"),n===t?this.nextSlidePager.attr("title","\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u9875\u4e86").addClass("slide-pagedown-end"):this.nextSlidePager.attr("title","\u4e0b\u4e00\u9875").removeClass("slide-pagedown-end")},toggleState:function(e){return e===undefined?this._state?this._state:"close":(this._state=e,this._state)},setThemeContainerStatus:function(t){return this.themeContainer==null?!1:(this.toggleState(t),t==="open"?(Browser.ie6?this.themeContainer.show():this.themeContainer.slideDown(200),uiproxy(e).on("keydown",f),uiproxy(e.body).on("mouseover",o),uiproxy(e.body).on("mouseleave",u),uiproxy(e.body).on("mouseenter",a),uiproxy(e.body).on("click",s)):(Browser.ie6?this.themeContainer.hide():this.themeContainer.slideUp(200),uiproxy(e).off("keydown",f),uiproxy(e.body).off("mouseover",o),uiproxy(e.body).off("mouseleave",u),uiproxy(e.body).off("mouseenter",a),uiproxy(e.body).off("click",s)),!0)},buildThemeLinkHref:function(e){var t=n.tmpl({host:HAO_CONFIG.themeConfig.cdn_host,themekey:e.key,name:e.name,v:HAO_CONFIG.themeConfig.v,snapshot:e.snapshot,dstVer:THEME_CONF.DSTVER,debug:DEBUG?"&debug=1":""});return t},setTheme:function(e){Browser.ie6?this.setTheme4IE6(e):this.setTheme4Standard(e),this.setRestoreButtonStatus(e.key)},setTheme4Standard:function(e){var t=this.buildThemeLinkHref(e);e.key===THEME_CONF.DEFAULT.key?(hao360.g("defaultThemeInlineCss")==null&&qboot.load.css(r,"defaultThemeInlineCss"),W("#userThemeOutlineCss").removeNode()):(Browser.firefox&&W("#defaultThemeInlineCss").removeNode(),i(t))},setTheme4IE6:function(e){var t=this.buildThemeLinkHref(e);W("#defaultThemeInlineCss").removeNode(),e.key===THEME_CONF.DEFAULT.key||!Browser.webkit?i(t):i(t)},showFlashSkin:function(){var e=hao360.themeData[0],t={night:"http://s0.qhimg.com/static/99a8e5bf25c9b4c1.swf",children:"http://s2.qhimg.com/static/11b8b5eb8f697d56.swf",lvyiangran:"http://s1.qhimg.com/static/d4cf210bc2553e9f.swf",tianmiaiqing:"http://s3.qhimg.com/static/573a3320094b1d22.swf",piaoliangguangyun:"http://s0.qhimg.com/static/ca409297710923da.swf",xingkong:"http://s4.qhimg.com/static/12e343da3a3a7719.swf"};if(!(e in t))return;W(".bg-inner").html('<object data="'+t[e]+'" width="100%" height="220" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"><param name="allownetworking" value="all"><param name="allowFullScreen" value="true"><param name="wmode" value="transparent"><param name="menu" value="false"><param name="scale" value="noScale"><param name="salign" value="1"></object>')},setRestoreButtonStatus:function(e){this.restoreButton&&this.restoreButton[e===THEME_CONF.DEFAULT.key?"hide":"show"]()},makeDiffuseEffect:function(e,t){var n=W("#background .bg-outer"),r=W("#background .bg-inner"),i=W("#background .bg-shiv");if(e==""||t=="")return r.css("backgroundImage","").css("backgroundColor","");n.removeClass("active"),i.css("backgroundColor",n.css("background")),i.css("backgroundImage",r.css("backgroundImage")),r.css("backgroundColor",e),r.css("backgroundImage",t=="none"?"":"url("+t+")");var s=t=="none"?"removeClass":"addClass";this.setImageOuterState(s),r=W("#background .bg-inner"),r.css("backgroundColor",""),r.css("backgroundImage","")},setImageOuterState:function(e){var t=W("#background .bg-outer");t[e]("active")[e]("has-theme")},makeShineAnimation:function(){function t(e){var t=W(e).query(".theme-shine");t.css("backgroundPosition","-98px -20px"),n&&n.stop();var n=new QW.ElAnim(t,{backgroundPosition:{to:"180px -20px"}},200);n.play()}var e=null;return function(n){clearTimeout(e),e=setTimeout(function(){t(n)},300)}}(),preloadLink:function(e){var t=this;qboot.load("preload",function(){qboot.preload(t.buildThemeLinkHref(e))})}};CustEvent.createEvents(l.action={}),window.themeView=l})(document);(function(e,t){var n=1,r=THEME_CONF.TAGKEYS[0]||"zuire",i=hao360.themeData[0],s=8;(function(){e.action.on("theme:change",function(e){if(e.themeKey==i)return;i=e.themeKey,o.setTheme(e.themeKey),e.stopBroad!==!0&&TweetH.tweet(document,"global:setTheme")}),e.action.on("theme:category",function(e){r=e.category,n=1,o.drawTheme()}),e.action.on("theme:preloadcategory",function(e){var t=r,i=n;n=1,r=e.category,o.preloadTheme(),n=i,r=t}),e.action.on("theme:prevpage",function(t){if(n<=1)return;n-=1,e.action.fire("theme:topage",{toPage:n,to:"prev",category:r})}),e.action.on("theme:nextpage",function(t){if(n>=o.collection().totalPage)return;n+=1,e.action.fire("theme:preloadnext"),e.action.fire("theme:topage",{toPage:n,to:"next",category:r})}),e.action.on("theme:preloadnext",function(t){var r=n+1;if(r>o.collection().totalPage)return;e.action.fire("theme:topage",{toPage:r,action:"preload"})}),e.action.on("theme:topage",function(e){var t=n;n=e.toPage;if(e.action&&e.action==="preload"){o.preloadTheme(),n=t;return}o.drawTheme()}),e.action.on("theme:restore",function(){i=THEME_CONF.DEFAULT.key,o.drawTheme(),o.setTheme(THEME_CONF.DEFAULT.key),TweetH.tweet(document,"global:resetTheme")}),e.action.on("theme:preloadlink",function(e){var t=e.themeKey,n=o.collection();if(n.isPreloadLink(t))return;n.setLinkPoll(t),n.themeKey2Data(t,o.preloadLink)})})(),function(){W(e.broadcast).receive("global:themeTrigger",function(e){var t=e.data.status,n=e.data.action;o.init().drawTheme();if(n==="click"){var r=o.toggleThemeContainer(t);r&&TweetH.tweet(document,"global:toggleShow",e.data)}})}();var o={init:function(){return e.init(),this},setExtCss:function(){e.setExtCss()},collection:function(){return this._collection||(this._collection=t())},preloadLink:function(t){e.preloadLink(t)},setTheme:function(t){o.collection().themeKey2Data(t,function(t){e.setTheme(t),hao360.themeData=[t.key,t.snapshot,t.extjs],(new AppData("api.hao.360.cn")).set("newUserTheme",[t.key,t.snapshot,t.extjs])})},updateCollectionStatus:function(){var e=this.collection();return e.category(r),e.page(n-1),e.count(s),e},preloadTheme:function(){var e=this.updateCollectionStatus();e.themeData()},drawTheme:function(){var e=this.updateCollectionStatus();e.themeData(function(e){themeView.drawTheme(function(){return{themeData:e.themeData,totalPage:e.themePageCount,currentPage:n,selectedThemeKey:i}})})},toggleThemeContainer:function(t){return e.setThemeContainerStatus(t)}};window.themeApp=o,o.setExtCss();var u=Konami();u.down("up->up->left->left->right->right->b->a",function(){var t=typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object"||window.ActiveXObject&&new ActiveXObject("ShockwaveFlash.ShockwaveFlash")!=0;t?e.showFlashSkin():console&&console.log("\u4f60\u5df2\u7ecf\u7981\u7528\u4e86Flash")})})(window.themeView,window.themeCollection);(function(){function e(){var e=HAO_CONFIG.themeConfig.host+"index.php";this.service=Bus.register({},e,!0)}function t(){return new e}e.prototype={getData:function(e){this.service.request({c:"theme",a:"quickSetIndex",fmt:"jsonp"},function(t){t.errno=="0"&&t.data&&t.data.length&&e&&e(t.data)})}},t.FastChangeThemeModel=e,window.fastChangeThemeModel=t})();(function(e){var t=['<span class="btn-pre-theme" onselectstart="return false">\u5411\u4e0a\u7ffb</span>','<span class="btn-next-theme" onselectstart="return false">\u5411\u4e0b\u7ffb</span>','<div class="g-tips g-tips-bottom tips-pre-theme" style="display:none;opacity:0;">','<div class="cont">{$left_desc}</div>',"<!--[if lt IE 9]>",'<b class="arrow-border"></b>','<b class="arrow-background"></b>',"<![endif]-->","</div>",'<div class="g-tips g-tips-bottom tips-next-theme" style="display:none;opacity:0;">','<div class="cont">{$right_desc}</div>',"<!--[if lt IE 9]>",'<b class="arrow-border"></b>','<b class="arrow-background"></b>',"<![endif]-->","</div>"];t=t.join("");var n={".btn-pre-theme":function(){o.action.fire("theme:fastchangeleft")},".btn-next-theme":function(){o.action.fire("theme:fastchangeright")}},r={".btn-pre-theme":function(){o.TipsShow(this,"pre"),o.action.fire("theme:preloadfastprev")},".btn-next-theme":function(){o.TipsShow(this,"next"),o.action.fire("theme:preloadfastnext")}},i={".btn-pre-theme":function(){o.TipsHide(this,"pre")},".btn-next-theme":function(){o.TipsHide(this,"next")}},s=!1,o={broadcast:{},init:function(e){this.themeSwitch=W("#theme-switch"),this.initUI(e),this.initEvents()},initUI:function(e){var n=t.tmpl({left_desc:e.left_desc,right_desc:e.right_desc});this.themeSwitch.html(n)},resetUI:function(e){this.themeSwitch&&this.themeSwitch.html("")},setSwithViewState:function(e){this.themeSwitch&&this.themeSwitch[e]()},initEvents:function(){if(s)return;s=!0,uiproxy(e.body).on("click",n,{preventDefault:!0}),uiproxy(e.body).on("mouseover",r),uiproxy(e.body).on("mouseout",i)},TipsShow:function(e,t){var n=W(".tips-{0}-theme".format(t)),r=n.query(".cont").html().trim();if(r==="")return;var i=0,s=0;n.show(),i=n[0].offsetWidth/2,n.hide(),s=(t=="pre"?14:56)-i,n.css("left",s+"px"),n.fadeIn(200)},TipsHide:function(e,t){W(".tips-{0}-theme".format(t)).hide()},toggleChangeBtn:function(e){this.themeSwitch&&this.themeSwitch[e==="open"?"hide":"show"]()}};CustEvent.createEvents(o.action={}),window.fastChangeThemeView=o})(document);(function(e,t,n){var r=0,i=[],s="open",o=120,u=[["\u773c\u8272\u89e6\u52a8\u7684\u5fc3\u60ac","\u6362\u4e2a\u597d\u5fc3\u60c5"],["hold\u4f4f\u597d\u65f6\u5149","\u7ed9\u89c6\u89c9\u4e00\u4e2a\u76db\u5bb4"],["\u88ab\u9057\u5fd8\u7684\u98ce\u666f","\u517b\u773c\u65f6\u523b"],["\u4e0e\u7f8e\u666f\u4e0d\u671f\u800c\u9047","\u8fd8\u6709\u66f4\u6f02\u4eae\u7684\u5462"],["\u7ed9\u4f60\u5370\u8c61\u6700\u6df1\u7684\u662f","\u968f\u5fc3\u800c\u53d8"]];(function(){e.action.on("theme:fastchangeleft",function(){r-=1,r<0&&(r=i.length-1),t.action.fire("theme:change",{themeKey:i[r].keyword,stopBroad:!0}),a.initUI(),e.action.fire("theme:preloadfastprev")}),e.action.on("theme:fastchangeright",function(){r+=1,r>i.length-1&&(r=0),t.action.fire("theme:change",{themeKey:i[r].keyword,stopBroad:!0}),a.initUI(),e.action.fire("theme:preloadfastnext")}),e.action.on("theme:preloadfastprev",function(){var e=r-1;e<0&&(e=i.length-1),t.action.fire("theme:preloadlink",{themeKey:i[e].keyword})}),e.action.on("theme:preloadfastnext",function(){var e=r+1;e>i.length-1&&(e=0),t.action.fire("theme:preloadlink",{themeKey:i[e].keyword})})})(),function(){W(e.broadcast).receive("global:resetTheme",function(){a.resetUI()}),W(e.broadcast).receive("global:setTheme",function(){a.init()}),W(e.broadcast).receive("global:toggleShow",function(e){e.data.action==="click"&&(s=e.data.status,Page.spaceWidth()<o&&(s="open"),a.toggleChangeBtn(s))}),W(e.broadcast).receive("page-size-changed",function(e){var n=e.data.spaceWidth,r=t.toggleState();a.setSwithViewState(n>o&&r==="close"?"show":"hide")})}();var a={init:function(){var t=this,n=this.model();n.getData(function(n){i=n,t.setCurrentThemeIndex(),e.init(n[r]),t.toggleChangeBtn(s)})},setCurrentThemeIndex:function(){var e=!1,t=((new AppData("api.hao.360.cn")).get("newUserTheme")||[THEME_CONF.DEFAULT.key,""])[0];r=0;for(var n=0,s=i.length;n<s;n++)if(i[n].keyword===t){r=n,e=!0;break}return e||this.addDefaultSwitchContent(t),this},addDefaultSwitchContent:function(e){var t=this.randomDefaultContentIndex(),n=u[t]||["\u6362\u4e2a\u597d\u5fc3\u60c5","\u7ed9\u89c6\u89c9\u4e00\u4e2a\u76db\u5bb4"];i[0]&&i[0].sign&&i.shift(),i.unshift({sign:"temp",keyword:e,left_desc:n[0],right_desc:n[1]})},randomDefaultContentIndex:function(){return Math.floor(Math.random()*u.length)},toggleChangeBtn:function(t){e.toggleChangeBtn(t)},model:function(){return this._model||(this._model=n())},setSwithViewState:function(t){e.setSwithViewState(t)},initUI:function(){e.initUI(i[r])},resetUI:function(){e.resetUI()}};hao360.themeData[0]!=="default"&&a.init()})(window.fastChangeThemeView,window.themeView,window.fastChangeThemeModel);(function(e,t){function s(e){setTimeout(function(){var t=+(new Date)+Math.random(),n="slog"+t,r=window[n]=new Image;e.rand=t,r.src=i.tmpl(e||{}),r.onload=r.onerror=function(){window[n]=null}},e.delay||100)}var n=qboot.cookie.get("guid")||qboot.cookie.get("__guid")||"",r="tiyan",i="http://s.360.cn/wzdh/theme2013.html?{$query}&guid="+n+"&_t={$rand}";(function(){s({query:"type=use&key="+hao360.themeData[0]}),e.action.on("theme:change",function(e){s({query:"type=panel&act=settheme&tname="+e.themeKey})}),e.action.on("theme:category",function(e){s({query:"type=panel&act=clicktag&cname="+e.category})}),e.action.on("theme:topage",function(e){e.action!=="preload"&&s({query:"type=panel&act=turnpage&to="+e.to+"&cname="+e.category})}),e.action.on("theme:restore",function(){s({query:"type=panel&act=setdefault"})}),W(e.broadcast).receive("global:toggleShow",function(e){e.data.action=="click"&&s({query:"type=panel&act="+e.data.status})}),t.action.on("theme:fastchangeleft",function(){s({query:"type=fastchange&act=click&to=left"})}),t.action.on("theme:fastchangeright",function(){s({query:"type=fastchange&act=click&to=right"})})})()})(window.themeView,window.fastChangeThemeView);(function(){var e=(new AppData("api.hao.360.cn","1.0")).get("userTheme");if(e){var t=e[0];hao360.validThemeKeys()[t]||themeApp.collection().themeKey2Data(t,function(e){hao360.themeData=[e.key,e.snapshot,e.extjs],(new AppData("api.hao.360.cn")).set("newUserTheme",[e.key,e.snapshot,e.extjs])}),(new AppData("api.hao.360.cn")).remove("userTheme");var n=(new AppData("api.hao.360.cn")).get("backupTheme");n&&LogHub&&LogHub.behavior("theme2013","backupSuccess")}})();(function(){var e=hao360.themeData;THEME_CHANGED_DATA&&THEME_CHANGED_DATA[e[0]]&&THEME_CHANGED_DATA[e[0]]!=e[1]&&(e[1]=THEME_CHANGED_DATA[e[0]],(new AppData("api.hao.360.cn")).set("newUserTheme",e))})();(function(e,t){e.action.on("theme:restore",function(e){t.changeTheme("default")}),e.action.on("theme:change",function(e){t.changeTheme(e.themeKey)})})(window.themeView,window.switchTobarTheme);M("#longlong",function(e,t){function r(e,t){this.el=e,this.a=e.query("a.tab-item"),this.hotpic=e.query(".hot-pic"),this.opts=n({delay:1e3},t,!0),this.init()}var n=qboot.mix;e("ul>li a").forEach(function(t){var n=e(t),r=e(t).attr("href"),i=n.parentNode("li").attr("data-channel");i&&window.CHANNELS&&CHANNELS[i]&&n.attr("data-page",CHANNELS[i].iframeUrl||n.attr("data-page"));var s=r.replace(/(\.\/$)|(brother\.html)/,"$1$2"+location.search);n.attr("href",s)}),n(r.prototype,{showInloaded:function(){if(this.el.hasClass("on"))return;var e=3e3+Math.random()*2e3,t=this,n=setTimeout(function(){t.show();var r=setTimeout(function(){t.hide(),clearTimeout(r)},e);clearTimeout(n)},t.opts.delay)},mEventHandle:function(){},init:function(){var e=this,t=this.hotpic.query("img").attr("src"),n=new Image;n.onload=function(){e.showInloaded()},n.src=t,this.mEventHandle()}});var i={show:function(){this.a.addClass("hover")},hide:function(){this.a.removeClass("hover")}},s={show:function(){this.hotpic.animate({top:{to:"1px"}},100)},hide:function(){this.hotpic.animate({top:{to:"38px"}},300)},mEventHandle:function(){var e=this,t=this.el,n=this.hotpic.query("img");t.hover(function(){t.hasClass("on")||e.show()},function(){e.hide()})}};Browser.ie<9?n(r.prototype,s,!0):n(r.prototype,i,!0),e(".hot-pic").forEach(function(t){var n=e(t).parentNode("li");new r(n)})});M("#longlong",function(e,t){var n=0,r=!1,i=15e3,s=7;t.receive("menupiano-trigger",function(){n++,r||(r=!0,setTimeout(function(){n>s&&LogHub.behavior("menupiano","playing"),r=!1,n=0},i))}),t.receive("menupiano-onMute",function(){LogHub.behavior("menupiano","onMute")}),t.receive("menupiano-offMute",function(){LogHub.behavior("menupiano","offMute")}),t.receive("menupiano-isOnMute",function(){LogHub.behavior("menupiano","isOnMute")}),t.receive("menupiano-isOffMute",function(){LogHub.behavior("menupiano","isOffMute")})});M("#menupiano-setting",function(e,t){function f(e,t,n){this.sound=e,this.wave=t,this.opts=u({autoOffTime:-1},n,!0),o(this,["trigger"])}function h(e,t){function n(){c&&(e=[]);var r=e.shift();r&&(l.trigger(r),setTimeout(function(){l.reset(r),n()},t||60))}c=!1,n()}function p(){var t=[];QW.W("#longlong li[data-note]").forEach(function(n){t.push(e(n).attr("data-note"))}),c=!0,h(t,120)}var n=350,r=!1,i=new Musical(3),s=function(){var e="1.0",n=function(t){(new AppData("api.hao.360.cn",e)).set("pianoIsMute1",t?1:0)},r=function(){return(new AppData("api.hao.360.cn",e)).get("pianoIsMute1")};(new AppData("api.hao.360.cn",e)).remove("pianoIsMute");var s=!0;return r()==0&&(s=!1),{isMute:function(){return s},onMute:function(e){QW.W("#longlong").removeClass("menupiano"),e&&n(!0),s=!0,t.removeClass("offmute").addClass("onmute").query("a").attr("title","\u70b9\u51fb\u5f00\u542f\u58f0\u97f3"),i.onMute()},offMute:function(e){QW.W("#longlong").addClass("menupiano"),e&&n(!1),s=!1,t.removeClass("onmute").addClass("offmute").query("a").attr("title","\u70b9\u51fb\u5173\u95ed\u58f0\u97f3"),i.offMute()},setInvalid:function(){t.addClass("invalid").query("a").attr("title","\u5f00\u542f\u58f0\u97f3\u9700\u5347\u7ea7\u6d4f\u89c8\u5668")},setValid:function(){t.addClass("valid")}}}(),o=QW.CustEvent.createEvents,u=qboot.mix,a={_tabs:{},timeInterval:300,getCurTime:function(){return+(new Date)},down:function(e){var t=this,n=Math.max(this._tabs[e]+this.timeInterval-this.getCurTime(),0);setTimeout(function(){QW.W("#longlong li[data-note="+e+"]").query("a").removeClass("hover"),delete t._tabs[e]},n)}};o(a,["rise","down"]),a.on("rise",function(e){var t=e.noteId;this._tabs[t]=this.getCurTime(),QW.W("#longlong li[data-note="+t+"]").query("a").addClass("hover")}),a.on("down",function(e){var t=e.noteId,n=this;t?this.down(t):ObjectH.keys(this._tabs).forEach(function(e){n.down(e)})}),u(f.prototype,{trigger:function(e,n){var r=this,i=this.sound,o=this.wave;i&&!s.isMute()&&(i.pronounce(e),t.tweet("menupiano-trigger")),o&&(o.fire("rise",{noteId:e}),n=n||this.opts.autoOffTime,n>-1&&setTimeout(function(){r.reset(e)},n||0)),this.fire("trigger",{noteId:e,autoOffTime:n})},reset:function(e){var t=this.wave;t&&t.fire("down",{noteId:e})},addSound:function(e){this.sound=e},removeSound:function(){delete this.sound},addWave:function(e){this.wave=e},removeWave:function(){this.wave&&(this.wave.fire("down"),delete this.wave)}});var l=new f(i,a),c=!1;if(!i.isCanUse())s.setInvalid();else{var d=function(){s.setValid(),s.isMute()?(s.onMute(),t.tweet("menupiano-isOnMute"),qboot.cookie.remove("caidangangqin1_tips"),qboot.cookie.remove("caidangangqin_tips")):(s.offMute(),t.tweet("menupiano-isOffMute"))};d();var v,m;QW.W("#longlong").on("mouseenter",function(){v=setTimeout(function(){r=!0},n)}).on("mouseleave",function(){clearTimeout(v)}),QW.W("#longlong li[data-note]").hover(function(){var t=this;r?r&&l.trigger(e(this).attr("data-note")):m=setTimeout(function(){r=!0,l.trigger(e(t).attr("data-note"))},n)},function(){r&&l.reset(e(this).attr("data-note")),clearTimeout(m)}),t.click(function(e){t.tweet("menupiano-tip-close"),t.tweet("menu-extra-total-silent"),s.isMute()?(s.offMute(!0),t.tweet("menupiano-offMute"),setTimeout(function(){p()},0)):(s.onMute(!0),t.tweet("menupiano-onMute"))}),t.receive("menu-extra-off-mute",function(e){s.isMute()&&s.offMute()}),function(){function r(e){if(!isNaN(e)&&e>0&&e<10)return!0}function i(e){var i=t[e]?t[e]:(String.fromCharCode(e)+"").toLowerCase();return i=n[i]||i,r(+i)?i:null}function s(e){if(["input","textarea","select"].indexOf(e.tagName.toLowerCase())>-1)return!0}function o(e,t){if(s(e))return;var n=i(t);n!==null&&l.trigger(n,200)}var t={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},n={a:1,s:2,d:3,f:4,g:5,h:6,j:7,k:8,l:9},u=function(){e(document).on("keydown",function(e){o(e.target,e.keyCode)})};u(),hao360.keySoundWave=o}()}window.soundWave=l}),function(){function t(){var e=location.hash.toLowerCase();if(/^#music(\d\;\d+(\;\d+)?(\-?))+$/.test(e))return e.substr(6).split("-");if(/^#music(\d\|\d+(\|\d+)?(,?))+$/.test(e))return e=e.replace(/\|/g,";"),e.substr(6).split(",");if(/^#music\d+$/.test(e))return e.substr(6).split("")}function n(t){W(document).tweet("menu-extra-off-mute");var n=new Tape;n.setData(t||[]),W(document).tweet("menu-extra-total-silent"),e.load(n),e.play()}function r(){var r=t();r&&(soundWave.sound.preload(),setTimeout(function(){n(r)},2e3)),W(window).on("hashchange",function(e){var r=t();r&&n(r)}),W(document).on("keydown",function(t){t.keyCode==27&&e.stop()}),W(document).receive("menu-extra-total-silent",function(t){e.stop()})}var e=new TapeDeck;r();var i=2}();